/*! custom-html-audio - v1.0.5 - 2019-06-19 
 *  A custom html5 audio wrapper, that allows styling and functional changes.
 */

"use strict";!function(e,n){"object"==typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.CustomHtmlAudio=n()}(this,function(){return function(e,n){var i,o,t,d,r,s,a,l,c,u={playing:!1,end:1,loaded:0,seeking:0,currentTime:0},f=function(e){var n=!1;for(var i in e)e[i]!==u[i]&&(u[i]=e[i],n=!0);n&&y()},v=function(e){e=Math.round(e);var n=Math.floor(e/60),i=e-60*n;return n.toFixed()+":"+(i<10?"0":"")+i.toFixed()},_=function(){return isFinite(u.end)?u.end:Math.max(u.currentTime+1,u.loaded)},p=function(e,n){var i=n.offsetWidth;return e.layerX/i*100},y=function(){var e=_();i.classList[u.playing?"add":"remove"]("playing"),s.innerHTML=v(u.currentTime),a.innerHTML=isFinite(u.end)?v(u.end):"",t.style.width=u.loaded/e*100+"%",d.style.width=u.currentTime/e*100+"%",r.style.width=u.seeking+"%"};if(n&&n.src){for((l=document.createElement("audio")).addEventListener("pause",function(){f({playing:!1})}),l.addEventListener("play",function(){f({playing:!0})}),l.addEventListener("ended",function(){f({playing:!1})}),l.addEventListener("error",function(){f({playing:!1})}),["loadedmetadata","progress","timeupdate","durationchange"].forEach(function(e){l.addEventListener(e,function(){var e={currentTime:l.currentTime,end:l.duration};l.buffered.length&&(e.loaded=l.buffered.end(l.buffered.length-1)),f(e)},!1)}),l.src=n.src,l.style.display="none";e.firstChild;)e.removeChild(e.firstChild);e.innerHTML='<div class="audio-controls"><div class="audio-controls__play"></div><div class="audio-controls__text"><span class="audio-controls__currentTime"></span><span class="audio-controls__end"></span></div><div class="audio-controls__time"><div class="audio-controls__loaded"></div><div class="audio-controls__seeking"></div><div class="audio-controls__played"></div></div><div class="audio-controls__noise"></div></div>',e.appendChild(l),i=e.querySelector(".audio-controls__play"),t=e.querySelector(".audio-controls__loaded"),d=e.querySelector(".audio-controls__played"),r=e.querySelector(".audio-controls__seeking"),s=e.querySelector(".audio-controls__currentTime"),a=e.querySelector(".audio-controls__end"),(o=e.querySelector(".audio-controls__time")).addEventListener("click",function(e){l.currentTime=_()*p(e,this)/100}),o.addEventListener("mousemove",function(e){f({seeking:p(e,this)})}),o.addEventListener("mouseenter",function(e){f({seeking:p(e,this)})}),o.addEventListener("mouseleave",function(){f({seeking:0})}),i.addEventListener("click",function(){f({playing:!u.playing}),l[u.playing?"play":"pause"]()})}else c="src for audio is not defined",console["error"||"info"]("[custom-html-audio.js] %o",c)}});